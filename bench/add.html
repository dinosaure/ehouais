<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/d3-simple-slider"></script>
  <script src="https://unpkg.com/simple-statistics@7.0.2/dist/simple-statistics.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
  <link href="style.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <style>
    *{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body{
    width: 100%;
    height: 100%;
    font-family:Helvetica Neue,metric,sans-serif;
    text-rendering: optimizeLegibility;
}

.center{
    width: 500px;
    margin:auto
}

text{
    font-family: metric,sans-serif;
}

.ml {
    text-align: left
}

svg {
    overflow: hidden;
    margin: auto
}

.axis line, .axis path{
    stroke: #2E3532;
    stroke-width:1px;
}

.axisTitle, .axis text{
    fill: #2E3532;
    font-size:12px;
}

.background {
    fill: #FBFBFB;
    stroke: #2E3532;
}

.axisTitle, .chartTitle{
    text-anchor: middle
}


.ytitle {
    text-anchor: middle;
    transform: rotate(90deg)
}

.warningtext{
    text-anchor: center;
    fill: #F06449;
}

.regLine {
    stroke: #F06449;
    stroke-width:2px;
    opacity:0.7
}

.circle {
    fill: #4ECDC4;
    stroke: #292f36;
    stroke-width:0.3px
}

table {
    margin:auto;
    text-align:left;
    border-spacing: 15px 5px;
    border: 1px solid #2E3532
}

th {
    text-align: center;
    color:#F06449
}


tr {
    fill: #2E3532;
    font-size:10px
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: auto;
  background-color: #F06449;
  color: #FFFFFF;
  text-align: center;
  border-radius: 10px;
  padding: 0 5px 0 5px;
  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}
.bar {
    fill: #4ECDC4;
    stroke:#292f36;
}
.bar:hover {
    fill: #F06449;
    stroke:#292f36;
    stroke-width:1px;
}

.radio {
    margin: auto;
    width : 200px;
}

.wrapper {
    display: grid;
    margin: 50px 50px 50px 50px;
    gap: 10px 20px;
    grid-auto-rows: minmax(20px, auto);
    text-align: center;
    place-items: center;
}

.mainTitle, .summarizeTitle {
    height:30px;
    width: auto;
    border-radius: 2px;
    padding: 0 45px 0 45px;
    border-style: solid;
    border-width:1px;
    box-shadow: 2px 2px 1px rgba(0,0,0,0.1);
    color:  #2E3532;
    background: #FBFBFB;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.slidecontainer{
    width: 50%;
}

  </style>
</head>
<body>

  <script type="text/javascript">
    // structure of JSON
// { xLabel: string,
//   yLabel: string,
//   series: [ tests ] }
//
// tests := { name: string,
//            description: { start : int, sampling: float, stabilize: bool,
//                           quota: float, limit: int, instances: [string],
//                           samples: int, time : float}
//            dataset: [ point ],
//            kde : [ v: float ] (optional)
//            result: { estimate: float, r_square: float (optional) } }
//
// point := { x : double,
//            y : double }
//
// xLabel and yLabel are the same for any tests
window.onload = function () {

const wsvg = 600;
const hsvg = 400;
const wslider = 200;
const hslider = 50;
const margin = {left:50,right:50,top:20,bottom:50};
const dotSize = 1.5;
const innerW = wsvg-(margin.left+margin.right);
const innerH = hsvg-(margin.top+margin.bottom);

const marginbar = {left:150,right:150,top:50,bottom:50};
const wbar = 900;
const innerWbar = wbar-(marginbar.left+marginbar.right);

const SQRT_2PI = Math.sqrt(2 * Math.PI);

// Main function : place containers and call plot functions.
function render(inputs) {
    inputs.series.forEach(
	function(serie) {
	    serie.dataset.forEach(
		function(d) {
		    d.x = +d.x;
		    d.y = +d.y;
		});}
    );

    // First step : check if there is no kde/histogram data at all in
    // the benchmarks, in which case, we want to reduce our layout to
    // one column.
    let nonempty_kde = false;
    inputs.series.forEach(function (serie) {
	if ('kde' in serie) {
	    nonempty_kde = nonempty_kde || true;} });
    const nb_col = nonempty_kde ? 2 : 1;

    // ************************************************ //
    //              Layout of the page                  //
    // ************************************************ //
    // + a summarize bar graph on top
    // + one section for each benchmark which includes
    //     * 1 title
    //     * 1 linear regression graph and its title and information table
    //     * if kde data are available a histogram/kde graph with its control panel.
    //
    // If none of the benchmarks has kde data, the layout is the same
    // but with only one column (no hist/kde graphs).
    //
    //
    //              c1:        c2:
    //
    // r1:            *title*
    //           ___________________
    // r2:      |   summarize bar   |
    //          |___________________|
    //
    // r3:           *title-1*
    //
    // r4:        *title*   *radio*
    //           _______     _______
    // r5:      | lr-1  |   | kde-1 |
    //          |_______|   |_______|
    //
    // r6:      *infos-1*   *slider-1*
    // ..
    // r(4i+3):       *title-i*
    //
    // r(4i+4):  *title*     *radio*
    //           _______     _______
    // r(4i+5): | lr-i  |   | kde-i |
    //          |_______|   |_______|
    //
    // r(4i+6): *infos-i*   *slider-i*
    //
    // etc ..

      const main = d3.select("body")
	  .append("div")
	    .attr("class", "wrapper")
	    .style("grid-template-columns", (nonempty_kde ? "repeat(2,"+wsvg+"px)" : "900px"))
	    .attr("id", "main");

    // ************************************************ //
    //              Summarize bar graph                 //
    // ************************************************ //

    // Title
    main.append("div")
   	  .style("grid-row", "1")
      	.style("grid-column", "1 / "+(nb_col+1))
  	  .attr("class", "summarizeTitle")
  	.text("Benchmarks summary");

    // Bar graph
    let bar_container = main
	.append("div")
   	  .style("grid-row", "2")
      	  .style("grid-column", "1 / "+(nb_col+1))
	  .attr("id", "bar");
    plot_summarize_bar_graph(bar_container, inputs);


    // ************************************************ //
    //              Layout for lr/kde graphs            //
    // ************************************************ //

    // Benchmark titles
    const titles = main
	  .selectAll(".mainTitle")
	  .data(inputs.series)
	  .enter()
	  .append("div")
	    .attr("id", (data, i) => "title-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+3))
      	    .style("grid-column", "1 / "+(nb_col+1))
  	    .attr("class","mainTitle")
	  .append("text")
  	    .attr("x", wsvg)
  	    .attr("y", margin.top-10)
            .text((data, i) => "#"+data.name);

    // Linear regression graph titles
    const titles_lr = main
	  .selectAll("#title_lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("id",  "title_lr")
   	    .style("grid-row", (data,i) =>""+(4*i+4))
   	    .style("grid-column", "1")
	  .append("text")
  	    .attr("class","chartTitle")
  	    .text("Linear regression");

    // Containers for linear regression graphs
    const lr_graphs = main
	  .selectAll(".lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr")
	    .attr("id", (data, i) => "linearRegression-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+5))
   	  .style("grid-column", "1");

    // Containers for linear regression info tables
    const lr_info = main
	  .selectAll(".lr-info")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr-info")
	    .attr("id", (data, i) => "lr-info-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+6))
            .style("grid-column", "1");

    let radio_div, kde_graphs, kde_controler;
    if (nonempty_kde) {
	// Containers for radio buttons to choose between histogram/kde plots
	radio_div = main
	      .selectAll(".radio_div")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class",  "radio")
	      .attr("id", (d, i) => "radio_div"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+4))
   	      .style("grid-column", "2");

	// Containers for kde/hist graph
	kde_graphs = main
	      .selectAll(".kde")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde")
	      .attr("id", (data, i) => "histKde-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+5))
   	      .style("grid-column", "2");

	// Containers for kde/hist controlers
	kde_controler = main
	      .selectAll(".kde-controler")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde-controler")
	      .attr("id", (data, i) => "kde-controler-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+6))
              .style("grid-column", "2");
    }

    // ************************************************ //
    //          Linear regression graph                 //
    // ************************************************ //
    lr_graphs.each( function(serie, i) {
	//Curves for each input
	const xMin = 0;
	const xMax = d3.max(serie.dataset, d => d.x);
	const yMin = 0;
	const yMax = d3.max(serie.dataset, d => d.y);

	// Define x axis
	const xScale = d3.scaleLinear()
  	      .domain([xMin,xMax])
  	      .range([0,innerW])
  	      .nice();
	const xAxis = d3.axisBottom()
  	      .scale(xScale)
  	      .ticks(8, "s");
	// "s" = number format such as 1000 -> 1k

	// Define y axis
	const yScale = d3.scaleLinear()
  	      .domain([yMin,yMax])
  	      .range([innerH,0])
  	      .nice();
	const yAxis = d3.axisLeft()
  	      .scale(yScale)
  	      .ticks(8, "s");

	// Svg
  	const plot = d3.select(this)
	    .append("svg")
  	      .attr("width",wsvg)
  	      .attr("height",hsvg);
	// Color background
	plot.append("rect")
  	    .attr("x",margin.left)
  	    .attr("y",margin.top)
  	    .attr("width",innerW)
  	    .attr("height",innerH)
  	    .attr("class","background axis");
	// Plot axis
	plot.append("g")
  	    .attr("transform",
	 	  "translate("+margin.left+","
	 	  +(hsvg-margin.bottom)+")")
	    .attr("class", "axis")
  	    .call(xAxis);
	plot.append("g")
  	    .attr("transform",
	  	  "translate("+margin.left+","
		  +margin.top+")")
	    .attr("class", "axis")
  	    .call(yAxis);
	// Print axis titles
	plot.append("text")
	    .attr("class", "axisTitle")
	    .attr("x", wsvg/2)
	    .attr("y", hsvg-10)
	    .text(inputs.xLabel);
	plot.append("text")
	    .attr("class", "axisTitle ytitle")
	    .attr("transform-origin", 0, hsvg/2)
	    .attr("x", 0)
	    .attr("y", hsvg/2)
	    .text(inputs.yLabel);

	// Plot data
	plot.append("g")
	    .attr("transform",
		  "translate("+margin.left+","
		  +margin.top+")")
  	    .selectAll("circle")
  	    .data(serie.dataset)
  	    .enter()
  	    .append("circle")
	    .attr("class", "circle")
  	    .attr("r", dotSize)
  	    .attr("cx", d => xScale(d.x))
  	    .attr("cy", d => yScale(d.y));

	// Plot linear regression line

	const xVals = serie.dataset.map((e,j) => e.x);
	const yVals = serie.dataset.map((e,j) => e.y);
	const pairs = [];
	xVals.forEach((d,i) => pairs.push([xVals[i],yVals[i]]));
	const linReg = ss.linearRegression(pairs);
	const linRegLine = ss.linearRegressionLine(linReg);
	let line = plot
	    .append("line")
    	      .attr("transform","translate("+margin.left+","+margin.top+")")
    	      .attr("class","regLine")
    	      .attr("x1",xScale(xMin))
    	      .attr("x2",xScale(xMin))
    	      .attr("y1",yScale(linRegLine(xMin)))
    	      .attr("y2",yScale(linRegLine(xMin)));
	line.transition().duration(1000).delay(2000)
    	      .attr("x2",xScale(xMax))
    	      .attr("y2",yScale(linRegLine(xMax)));

	// Add text boxes
	//const meanX = ss.mean(xVals).toFixed(0);
	//const meanY = ss.mean(yVals).toFixed(2);
	//const varX = ss.sampleVariance(xVals).toFixed(0);
	//const varY = ss.sampleVariance(yVals).toFixed(1);
	//const corCoeff = ss.sampleCorrelation(xVals,yVals).toFixed(3);

	const lr_results = [
	    ["Linear regression line", "y = "+linReg.b.toFixed(2)+" + "+linReg.m.toFixed(3)+"x"],
	    ["Coefficient", serie.result.estimate],
	    ["R²", serie.result.r_square]
	];

	const sampling_to_string = sampling =>
              (Number.isInteger(sampling) ?  "`Linear "+sampling+"" : "`Geometric "+sampling+"");

	const format = v  => d3.format("s")(v);

	const param_benchmarks = [
	    ["LR sampling (sampling)", sampling_to_string(serie.description.sampling)],
	    ["Start (start)", serie.description.start],
	    ["Benchmark runtime (time / quota)",
	     format(serie.description.time) + " / " + format(serie.description.quota)],
	    ["Number of runs (samples)", serie.description.samples + " / " + serie.description.limit],
	    ["Stabilized GC (stabilize)", serie.description.stabilize]
	];

	const table = d3.select("#lr-info-"+i)
	      .append("table");

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Linear regression results");

	table.append("tbody")
	    .selectAll("tr")
	    .data(lr_results)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("class", "tooltip")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Benchmarks parameters")
	    .append("span")
	    .attr("class","tooltiptext")
	    .text("See [Benchmarks.stats]");

	table.append("tbody")
	    .selectAll("tr")
	    .data(param_benchmarks)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

    });

    // ************************************************ //
    //         Histogram and kde graphs                 //
    // ************************************************ //
    if (nonempty_kde) {
        kde_graphs.each(function (serie, i) {

	    // Svg for histogram and kde graphs
	    let pdfgraph = d3.select(this)
		.append("svg")
		.attr("id", "pdfgraph")
		.attr("width", wsvg)
		.attr("height", hsvg)
		.append("g")
		.attr("transform", "translate("+margin.left+","+margin.top+")");

	    // If there is no kde field in the data [serie], some note
	    // is written in the svg window.
	    if (!('kde' in serie)) {
		pdfgraph.append("text")
		    .attr("x", (margin.left+margin.right+wsvg)/2)
		    .attr("y", (margin.top+margin.bottom+hsvg)/2)
		    .attr("class", "warning")
		    .text("No available data");
	    } else if (d3.max(serie.kde) == d3.min(serie.kde)) {
		pdfgraph.append("text")
		    .attr("x", wsvg/2)
		    .attr("y", hsvg/2)
		    .attr("class", "warningtext")
		    .text("All data have same value.");
	    } else {
		const data = serie.kde;
		//Some default values
		const min_slider = (d3.max(data)-d3.min(data))/data.length;
		const max_slider = (d3.max(data)-d3.min(data))/30;
		let vslider = min_slider;

		//Radio buttons
		const form = d3.select("#radio_div"+i)
		      .append("form");

		form.append("input")
		    .attr("type", "radio")
		    .attr("name", "graph")
		    .attr("value", "hist"+i)
		    .attr("name", "graph")
		    .attr("checked", "checked")
		    .on("change", () => plot_chosen_graph(d3.select(this), "hist"));
		form.append("label")
		    .attr("for", "hist"+i)
		    .text("Histogram");
		form.append("input")
		    .attr("type", "radio")
		    .attr("value", "kde"+i)
		    .attr("name", "graph")
		    .on("change", () => plot_chosen_graph(d3.select(this), "kde"));
		form.append("label")
		    .attr("for", "kde"+i)
		    .text("KDE");

		//axis
		const min = d3.min(data),
		      max = d3.max(data);
		const minX = d3.max([0, min-max_slider]),
		      maxX = max+max_slider;

		//X axis is the same for both graphs (histogram and kde)
		const xscale = d3.scaleLinear()
		      .range([0, innerW])
		      .domain([minX, maxX])
		      .nice();
		const xAxis = d3.axisBottom()
		      .scale(xscale)
		      .ticks(8, "s");

		//Y axis has a different domain value between both graphs.
		//So yscale.domain() is defined individually for each plot.
		const yscale = d3.scaleLinear()
		      .range([0, innerH])
		      .nice();
		const yAxis = d3.axisLeft()
		      .scale(yscale)
		      .ticks(8, "s");

		//x value for kde graph
		const n = 1000;
		const x = Array(n);
		const xmin = d3.min(xscale.domain()),
		      xmax = d3.max(xscale.domain());
		for (let i=0; i<n; i++) { x[i] = xmin + i*(xmax-xmin)/n; }

		//Compute kde function for min bandwidth value to determine to determine
		//the max value of Y axis. Only happens one time when loading the webpage.
		const kde = kernelDensityEstimation(data, min_slider);
		const v = new Array(n);
		for (let i=0; i<n;i++){ v[i] = kde(x[i]);}
		const maxYkde = d3.max(v),
		      maxYhist = d3.max(histogram(data, max_slider, min, max));

		//background
		pdfgraph
		    .append("rect")
  		    .attr("x", 0)
  		    .attr("y", 0)
  		    .attr("width", innerW)
  		    .attr("height", innerH)
  		    .attr("class","background axis");

		// x Axis
		const gxAxis = pdfgraph
	              .append("g")
	              .attr("transform","translate(0"+","+innerH+")")
	              .attr("class", "axis")
	              .call(xAxis);

		// y Axis
		const gyAxis = pdfgraph
	              .append("g")
	              .attr("class", "axis")
	              .call(yAxis);

		// X Axis title
		pdfgraph.append("text")
		    .attr("class", "axisTitle")
		    .attr("x", innerW/2)
		    .attr("y", innerH+40)
		    .text("Estimated "+inputs.yLabel);

		plot_chosen_graph(d3.select(this), "hist");

		function plot_chosen_graph(container, choice) {


		    container.selectAll(".bar").remove();
		    container.select(".mypath").remove();
		    container.select(".ytitle").remove();

		    // Erasing control panels if it exists and initializing it
		    const control_container = d3.select("#kde-controler-"+i);
		    const slider = control_container.select("#slider-"+i);
		    const slidertitle = control_container.select("#slidertitle-"+i);
		    if (!slider.empty())  {
			slider.remove();
		    }
		    if (!slidertitle.empty())  {
			slidertitle.remove();
		    }

		    //Hist part
		    if (choice=="hist") {
			// Defined yAxis
			yscale.domain([maxYhist, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", 10)
			    .attr("y", innerH/2)
			    .text("Count");

			const barwidth = vslider;

			const update_hist =
			      plot_histogram(pdfgraph, data, barwidth, xscale, yscale);

			//slider
			control_container
			    .insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Barwidth");

			control_container
			    .insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) => {
				      if (value > 0) {
					  vslider=value;
					  update_hist(vslider);}}));
		    } else {
			//Defined yAxis
			yscale.domain([maxYkde, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", +10)
			    .attr("y", innerH/2)
			    .text("Density");

			const bandwidth = vslider;
			const update_kde = plot_kde(pdfgraph, data, bandwidth, xscale, yscale, x);

			//slider
			control_container.insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Bandwidth");

			control_container.insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) =>
				      {if (value > 0) { vslider=value; update_kde(vslider);}}));
		    }; // end else
		}; // end function
	    }; //end else (available kde data)
	}); //end function // end each
    }; //end if



function plot_summarize_bar_graph(container, inputs) {

    const hbar = d3.min([60*inputs.series.length, hsvg]);
    const innerHbar = hbar - marginbar.top - marginbar.bottom;

    const xb = d3.scaleLinear()
	  .range([0, innerWbar])
	  .domain([0, d3.max(inputs.series, serie => serie.result.estimate)])
	  .nice();
    const yb = d3.scaleBand()
	  .range([0, innerHbar])
	  .padding(0.2)
	  .domain(inputs.series.map(serie => serie.name));
    const xbAxis = d3.axisBottom()
	  .scale(xb)
	  .ticks(8, "s");
    const ybAxis = d3.axisLeft()
	  .scale(yb);

    const bargraph =
	container.append("svg")
	.attr("width", wbar)
	.attr("height", hbar);

    // background
    bargraph.append("rect")
  	.attr("x", marginbar.left)
  	.attr("y", marginbar.top)
  	.attr("width", innerWbar)
  	.attr("height", innerHbar)
  	.attr("class", "background axis");
    // x Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+(hbar-marginbar.bottom)+")")
	.attr("class", "axis")
	.call(xbAxis);
    // x axis title
    bargraph.append("text")
	.attr("class", "axisTitle")
	.attr("x", wbar/2)
	.attr("y", hbar-10)
	.text("Estimated "+inputs.yLabel);
    // y Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.bottom+")")
	.attr("class", "axis")
	.call(ybAxis);

    // Bargraph
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.top+")")
	.selectAll(".bar")
   	.data(inputs.series)
	.enter()
	.append("rect")
	.attr("class", "bar")
	.attr("y", serie => yb(serie.name))
	.attr("height", yb.bandwidth)
	.attr("x", serie => 0)
	.attr("width", serie => xb(serie.result.estimate))
	.attr("fill", "#4ECDC4")
	.on("mouseover", function (serie) {
	    // Specify where to put label of text
	    bargraph.append("text")
		.attr("class", "axisTitle")
		.attr("id", "tt")
		.attr("x", wbar-200)
		.attr("y", marginbar.top-10)
		.text("Value: "+d3.format(".4s")(serie.result.estimate));
	})
        .on("mouseout", function (serie) {
	    // Select text by id and then remove
	    d3.selectAll("#tt").transition().duration("50").remove();
	});

};

// [histrogram (data, barwidth, min, max)] computes histogram
// values as follows:
// - a value [v] of [data] contributes to the bar between [u] and
// [u+barwidth] if u <= v < u+barwidth
// - the [i]th bar is between [min+i*barwidth] and [min+(i+1)*barwidth]
// - [max] is used only to determine the number of bars. It MUST be greater
// than [d3.max(data)]
function histogram(data, barwidth, min, max) {
    const nbar = Math.floor((max-min)/barwidth)+1;
    let hist = new Array(nbar);
    for (let i=0; i<nbar; i++) {
	hist[i]=0;
    }

    data.forEach(function(v) {
	const ind = Math.floor((v-min)/barwidth);
	hist[ind] ++;
    });

    let n = data.length;
    for (let i=0; i<nbar; i++) {
	hist[i] = hist[i];
    }

    return hist;
}

// [plot_histogram(container, data, bandwidth, xscale, yscale)]
// draws the histogram computes with
// [histogram(data, barwidth, d3.min(data), d3.max(data)]
// in the html element [container].
//
// Axis are already defined on [container], using [xscale] and [yscale].
//
// In addition, this function returns the update function
// that redraw the bar if called with a new barwidth.
function plot_histogram(container, data, barwidth, xscale, yscale) {
    const min = d3.min(data),
	  max = d3.max(data);
    const hist = histogram(data, barwidth, min, max);
    const sample_nb = data.length;

    const print_value = function (v) {
	container.append("text")
	    .attr("class", "axisTitle")
	    .attr("id", "tt2")
	    .attr("x", wsvg-170)
	    .attr("y", 20)
	    .text("Value: "+d3.format("d")(v)+" / "+d3.format("d")(sample_nb));};

    const rects = container
	  .selectAll(".bar")
   	  .data(hist)
	  .enter();

    rects.append("rect")
	.attr("class", "bar")
	.attr("x", (v, i) => xscale(i*barwidth+min))
	.attr("width", (v, i) => xscale(barwidth)-xscale(0))
	.attr("y", (v, i) => yscale(v))
	.attr("height", (v, i) => innerH-yscale(v))
	.on("mouseover", print_value)
        .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());

    function update_hist(nbarwidth) {
	//compute new histograph values
	const nhist = histogram(data, nbarwidth, min, max);

	const rects = container
	      .selectAll(".bar")
   	      .data(nhist);

	rects.exit().remove();

	rects.enter().append("rect").attr("class", "bar")
	    .merge(rects)
	    .attr("x", (v, i) => xscale(i*nbarwidth+min))
	    .attr("width", (v, i) => xscale(nbarwidth)-xscale(0))
	    .attr("y", (v, i) => yscale(v))
	    .attr("height", (v, i) => innerH-yscale(v))
	    .on("mouseover", print_value)
            .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());
    }
    return update_hist;
};

// [kernelDensityEstimation(data, bandwith] returns the function x -> kde(x)
//    for [data]. The kernel function used is a gaussian.
function kernelDensityEstimation(X, bandwidth) {
    //gaussian constante
    const a = 1/(2*bandwidth*bandwidth);
    const b = bandwidth * SQRT_2PI;
    const gaussianKernel =
	  function (x) {
	      return Math.exp(-a * x * x) / b;
	  };

    return function (x) {
        let i = 0;
        let sum = 0;
        for (i = 0; i < X.length; i++) {
	    sum += gaussianKernel(x - X[i])/X.length;
        }
	return sum ;
    };
}

// [plot_kde(container, data, bandwidth, xscale, yscale, x)] draws
// the kde function computes with [kde(data, bandwidth)]
// for the abscisse values defined by [x], in the html element
// [container].
//
// Axis are already defined on [container], using [xscale] and
// [yscale].
//
// In addition, this function returns the update function that
// redraw the curve if called with a new bandwidth.
function plot_kde(container, data, bandwidth, xscale, yscale, x) {
    const n = x.length;
    const kde = kernelDensityEstimation(data, bandwidth);
    const density = new Array(n);

    for (let i=0; i<n;i++){
	let tmp = x[i] ;
	density[i] = [tmp, kde(tmp)];
    }

    const graph = container
	  .append('g')
	  .append("path")
	  .attr("class", "mypath")
	  .datum(density)
	  .attr("fill", "#4ECDC4")
	  .attr("opacity", ".8")
	  .attr("stroke", "#292F36")
	  .attr("stroke-width", 1)
	  .attr("stroke-linejoin", "round")
	  .attr("d",
		d3.line()
		.curve(d3.curveBasis)
		.x(d => xscale(d[0]))
		.y(d => yscale(d[1])));

    function update_kde(nbandwidth) {
	let kde = kernelDensityEstimation(data, nbandwidth);

	for (let i=0; i<n;i++){
	    density[i][1] = kde(density[i][0]);
	}

	graph.datum(density)
	    .transition()
	    .duration(50)
	    .attr("d",
		  d3.line()
		  .curve(d3.curveBasis)
		  .x(d => xscale(d[0]))
		  .y(d => yscale(d[1])));
    };

    return update_kde;
};

};


var contents = null;
contents = {"xLabel":"run","yLabel":"monotonic-clock","series":[{"name":"add/ewah","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":375,"time":2036576426},"dataset":[{"x":1,"y":27768},{"x":2,"y":48312},{"x":3,"y":65688},{"x":4,"y":84576},{"x":5,"y":101840},{"x":6,"y":122344},{"x":7,"y":141468},{"x":8,"y":162708},{"x":9,"y":180356},{"x":10,"y":223364},{"x":11,"y":243428},{"x":12,"y":243092},{"x":13,"y":261456},{"x":14,"y":283096},{"x":15,"y":301356},{"x":16,"y":320608},{"x":17,"y":344744},{"x":18,"y":406592},{"x":19,"y":410456},{"x":20,"y":414104},{"x":21,"y":433028},{"x":22,"y":448676},{"x":23,"y":465264},{"x":24,"y":489752},{"x":25,"y":509328},{"x":26,"y":532032},{"x":27,"y":564940},{"x":28,"y":573920},{"x":29,"y":595480},{"x":30,"y":616104},{"x":31,"y":634968},{"x":32,"y":707036},{"x":33,"y":696232},{"x":34,"y":694792},{"x":35,"y":746892},{"x":36,"y":716620},{"x":37,"y":737424},{"x":38,"y":759216},{"x":39,"y":849424},{"x":40,"y":825796},{"x":41,"y":846164},{"x":42,"y":851956},{"x":43,"y":905584},{"x":44,"y":914136},{"x":45,"y":926164},{"x":46,"y":934276},{"x":47,"y":967688},{"x":48,"y":1027844},{"x":49,"y":979856},{"x":50,"y":1000220},{"x":51,"y":1031520},{"x":52,"y":1085928},{"x":53,"y":1065680},{"x":54,"y":1088680},{"x":55,"y":1163868},{"x":56,"y":1134804},{"x":57,"y":1092428},{"x":58,"y":1110944},{"x":59,"y":1236416},{"x":60,"y":1178668},{"x":61,"y":1249496},{"x":62,"y":1258756},{"x":63,"y":1223652},{"x":64,"y":1289440},{"x":65,"y":1361560},{"x":66,"y":1329936},{"x":67,"y":1346896},{"x":68,"y":1370296},{"x":69,"y":1483616},{"x":70,"y":1411676},{"x":71,"y":1494484},{"x":72,"y":1451940},{"x":73,"y":1464412},{"x":74,"y":1568484},{"x":75,"y":1462856},{"x":76,"y":1537624},{"x":77,"y":1614992},{"x":78,"y":1523744},{"x":79,"y":1595644},{"x":80,"y":1560764},{"x":81,"y":1633864},{"x":82,"y":1607140},{"x":83,"y":1617336},{"x":84,"y":1739768},{"x":85,"y":1679108},{"x":86,"y":1700432},{"x":87,"y":1666736},{"x":88,"y":1717300},{"x":89,"y":1777452},{"x":90,"y":1731324},{"x":91,"y":1795968},{"x":92,"y":1814484},{"x":93,"y":1832708},{"x":94,"y":1804680},{"x":95,"y":1908476},{"x":96,"y":1954468},{"x":97,"y":2053016},{"x":98,"y":1924304},{"x":99,"y":1966600},{"x":100,"y":1988832},{"x":101,"y":1987048},{"x":102,"y":2029736},{"x":103,"y":2046364},{"x":104,"y":1998772},{"x":105,"y":2073676},{"x":106,"y":2031080},{"x":107,"y":2095844},{"x":108,"y":2080880},{"x":109,"y":2155876},{"x":110,"y":2099472},{"x":111,"y":2169220},{"x":112,"y":2196104},{"x":113,"y":2312832},{"x":114,"y":2269236},{"x":115,"y":2224056},{"x":116,"y":2327712},{"x":117,"y":2313192},{"x":118,"y":2342804},{"x":119,"y":2390576},{"x":120,"y":2610624},{"x":121,"y":2431176},{"x":122,"y":2440168},{"x":123,"y":2441476},{"x":124,"y":2509280},{"x":125,"y":2423704},{"x":126,"y":2578484},{"x":127,"y":2496792},{"x":128,"y":2508844},{"x":129,"y":2524492},{"x":130,"y":2497880},{"x":131,"y":2563672},{"x":132,"y":2624040},{"x":133,"y":2601496},{"x":134,"y":2858912},{"x":135,"y":2845176},{"x":136,"y":2656524},{"x":137,"y":2676756},{"x":138,"y":2755108},{"x":139,"y":2773896},{"x":140,"y":2795360},{"x":141,"y":2793500},{"x":142,"y":2744352},{"x":143,"y":2807992},{"x":144,"y":2823472},{"x":145,"y":2832740},{"x":146,"y":2800812},{"x":147,"y":2877760},{"x":148,"y":2936080},{"x":149,"y":2932364},{"x":150,"y":2955268},{"x":151,"y":2939308},{"x":152,"y":3058936},{"x":153,"y":2981156},{"x":154,"y":3003568},{"x":155,"y":3013472},{"x":156,"y":3093652},{"x":157,"y":3191820},{"x":158,"y":3185584},{"x":159,"y":3111312},{"x":160,"y":3115904},{"x":161,"y":3232844},{"x":162,"y":3131852},{"x":163,"y":3151688},{"x":164,"y":3339532},{"x":165,"y":3216944},{"x":166,"y":3241460},{"x":167,"y":3250896},{"x":168,"y":3293112},{"x":169,"y":3301400},{"x":170,"y":3322312},{"x":171,"y":3387264},{"x":172,"y":3499048},{"x":173,"y":3367572},{"x":174,"y":3480424},{"x":175,"y":3645772},{"x":176,"y":3472044},{"x":177,"y":3568824},{"x":178,"y":3700040},{"x":179,"y":3554160},{"x":180,"y":3580528},{"x":181,"y":3479416},{"x":182,"y":3539264},{"x":183,"y":3558468},{"x":184,"y":3533192},{"x":185,"y":3609364},{"x":186,"y":3612548},{"x":187,"y":3585820},{"x":188,"y":3645312},{"x":189,"y":3627440},{"x":190,"y":3682448},{"x":191,"y":3712160},{"x":192,"y":3691888},{"x":193,"y":3808860},{"x":194,"y":3782364},{"x":195,"y":3807380},{"x":196,"y":3913368},{"x":197,"y":3841092},{"x":198,"y":3946360},{"x":199,"y":3913568},{"x":200,"y":4024428},{"x":202,"y":3912488},{"x":204,"y":3980576},{"x":206,"y":3960720},{"x":208,"y":4102120},{"x":210,"y":4106776},{"x":212,"y":4107952},{"x":214,"y":4156168},{"x":216,"y":4280996},{"x":218,"y":4363012},{"x":220,"y":4280752},{"x":222,"y":4392704},{"x":224,"y":4569108},{"x":226,"y":4467580},{"x":228,"y":4401008},{"x":230,"y":4509648},{"x":232,"y":4586436},{"x":234,"y":4553088},{"x":236,"y":4589904},{"x":238,"y":4684720},{"x":240,"y":4720204},{"x":242,"y":4766188},{"x":244,"y":4826756},{"x":246,"y":4828100},{"x":248,"y":4843032},{"x":250,"y":4930864},{"x":252,"y":5071928},{"x":254,"y":4964932},{"x":256,"y":5085040},{"x":258,"y":5097608},{"x":260,"y":5268156},{"x":262,"y":5261440},{"x":264,"y":5292676},{"x":266,"y":5304336},{"x":268,"y":5400712},{"x":270,"y":5326948},{"x":272,"y":5477780},{"x":274,"y":5458068},{"x":276,"y":5480648},{"x":278,"y":5721528},{"x":280,"y":5647144},{"x":282,"y":5753916},{"x":284,"y":5919988},{"x":286,"y":5686916},{"x":288,"y":5932048},{"x":290,"y":5793100},{"x":292,"y":5771404},{"x":294,"y":5762348},{"x":296,"y":5992608},{"x":298,"y":5792824},{"x":300,"y":6113276},{"x":303,"y":6081516},{"x":306,"y":6059072},{"x":309,"y":6113032},{"x":312,"y":6113112},{"x":315,"y":6038948},{"x":318,"y":6289888},{"x":321,"y":6178288},{"x":324,"y":6424344},{"x":327,"y":6418128},{"x":330,"y":6486068},{"x":333,"y":6365904},{"x":336,"y":6578616},{"x":339,"y":6720244},{"x":342,"y":6715100},{"x":345,"y":6886520},{"x":348,"y":6853060},{"x":351,"y":7145784},{"x":354,"y":6942512},{"x":357,"y":6905356},{"x":360,"y":6965848},{"x":363,"y":7182268},{"x":366,"y":7249424},{"x":369,"y":7196072},{"x":372,"y":7337544},{"x":375,"y":7245948},{"x":378,"y":7473036},{"x":381,"y":7897500},{"x":384,"y":7536216},{"x":387,"y":7616504},{"x":390,"y":7798856},{"x":393,"y":7616532},{"x":396,"y":7789376},{"x":399,"y":7814596},{"x":402,"y":8125776},{"x":406,"y":8173260},{"x":410,"y":8228716},{"x":414,"y":8131112},{"x":418,"y":8041944},{"x":422,"y":8226036},{"x":426,"y":8587800},{"x":430,"y":8419760},{"x":434,"y":8367008},{"x":438,"y":8550448},{"x":442,"y":8758744},{"x":446,"y":8886176},{"x":450,"y":8823260},{"x":454,"y":8898952},{"x":458,"y":9033860},{"x":462,"y":8870584},{"x":466,"y":9008924},{"x":470,"y":9262048},{"x":474,"y":9642140},{"x":478,"y":9696596},{"x":482,"y":9745680},{"x":486,"y":9774952},{"x":490,"y":9914268},{"x":494,"y":9930496},{"x":498,"y":10020192},{"x":502,"y":10379864},{"x":507,"y":10248200},{"x":512,"y":10435184},{"x":517,"y":10492816},{"x":522,"y":10496792},{"x":527,"y":10450004},{"x":532,"y":10441924},{"x":537,"y":10587672},{"x":542,"y":10659152},{"x":547,"y":10876504},{"x":552,"y":10810104},{"x":557,"y":10932824},{"x":562,"y":11137964},{"x":567,"y":11248264},{"x":572,"y":11453036},{"x":577,"y":11196088},{"x":582,"y":11416588},{"x":587,"y":11720168},{"x":592,"y":11881232},{"x":597,"y":11647392},{"x":602,"y":11781368},{"x":608,"y":11920596},{"x":614,"y":12327056},{"x":620,"y":12093832},{"x":626,"y":12404052},{"x":632,"y":12410700},{"x":638,"y":12529356},{"x":644,"y":12559252},{"x":650,"y":12593084},{"x":656,"y":12646296},{"x":662,"y":12911032},{"x":668,"y":12880940},{"x":674,"y":13310236},{"x":680,"y":13450612},{"x":686,"y":13579388},{"x":692,"y":13335304},{"x":698,"y":13490908},{"x":704,"y":13832116},{"x":711,"y":13852156},{"x":718,"y":14167848},{"x":725,"y":14378368},{"x":732,"y":14299020},{"x":739,"y":14469888},{"x":746,"y":14814420},{"x":753,"y":14618128},{"x":760,"y":15125468},{"x":767,"y":15575828},{"x":774,"y":15700188},{"x":781,"y":15831372},{"x":788,"y":15829336},{"x":795,"y":16127484},{"x":802,"y":16126320},{"x":810,"y":16210868},{"x":818,"y":16036564},{"x":826,"y":16258052},{"x":834,"y":16440524},{"x":842,"y":16652748},{"x":850,"y":16751900},{"x":858,"y":17143928},{"x":866,"y":16978764},{"x":874,"y":17279152},{"x":882,"y":17294296},{"x":890,"y":17657808},{"x":898,"y":17751492},{"x":906,"y":18008892},{"x":915,"y":18278636},{"x":924,"y":18530512}],"kde":[19988,19556,19736,19500,19580,19532,19600,19664,19508,19536,19436,19348,19616,19472,19528,19476,19444,19620,19496,19468,19408,19484,19384,19444,19444,19532,19400,19560,19472,19588,19516,19452,19468,19496,19436,19532,19416,19416,19292,19372,19216,19584,19232,19412,19596,19472,19380,19548,19480,19616,19484,19488,19496,19524,19436,19616,19296,19576,19344,19404,19480,19504,19532,19664,19504,19776,19460,19488,19444,19444,19588,19552,19616,19776,19428,19516,19472,19468,19976,19564,19524,19520,19532,19392,19572,19352,19564,19448,19556,19456,19612,19524,19464,19408,19412,19432,19488,19412,19584,19420,19516,19380,19620,19344,19548,19576,19520,19492,19452,19436,19644,19452,19672,19616,19528,19600,19616,19528,19648,19396,19588,19364,19448,19588,19564,19608,19652,19488,19536,19484,19488,19496,19476,19700,19500,19584,19420,19624,19484,19488,19536,19512,19508,19492,19516,19552,19376,19456,40704,20304,20172,20312,20168,20296,20092,20280,20240,20256,20092,20288,20176,20320,35816,19600,19456,19604,19184,19468,19348,19480,19628,19496,19396,19584,19444,19664,19348,19536,19476,19592,19464,19612,19408,19500,19220,19400,19532,19528,19608,19620,19484,19652,19516,19436,19496,19504,19740,19560,19480,19440,19448,19452,20144,19532,19488,21264,19472,19484,19492,19304,19636,19512,19524,19312,21172,19376,19480,19388,19504,19704,19628,19432,19452,19444,19544,19452,19608,19380,19600,19308,19460,19400,19488,19632,19692,19448,19556,19472,19628,19524,19520,19604,19596,19532,19556,19484,19496,19340,19364,19704,19644,19532,19704,19524,19728,19396,19548,19464,19660,19688,19416,19480,19360,19476,19448,19504,19696,19612,19524,19444,19428,19512,19308,19552,19388,19696,19360,19624,19436,19608,19444,19568,19568,19512,19348,19496,19432,19580,19560,19668,19460,19544,19220,19448,19340,19460,19536,19616,19436,19664,19460,19608,19532,19556,19696,19664,19424,19520,19400,19476,19376,19508,19592,19608,19728,19524,19480,19564,19552,19596,19512,19492,19720,19448,19484,19496,19496,19492,19440,19552,19596,19752,19452,19424,19532,19420,19544,19424,19480,19280,19536,19488,19584,19480,19464,19476,19608,19296,48588,20372,20392,20120,20276,20212,20288,20052,20080,20116,20320,20248,20184,20192,36380,19576,19684,19564,19604,19384,19620,19452,19624,19424,19488,19404,19516,19540,19612,19516,19636,19640,19608,19548,19400,19452,19436,19644,19508,19384,19348,19380,19360,19412,19480,19536,19240,19680,19612,19488,19384,19480,19404,19472,19320,19620,19456,19632,19424,19664,19568,19408,19432,19572,19384,19652,19440,19516,19436,19492,19420,19636,19392,19584,19512,19524,19428,19520,19824,19696,19596,19556,19488,19540,19496,19504,19384,19460,19356,19436,19616,19652,19568,19640,37612,20408,20248,20264,20252,20240,20384,20128,20188,20164,20084,20164,20360,20228,20136,20184,20196,20144,20356,20128,20336,20156,20300,19528,19608,19520,19664,19384,19536,19452,19340,19372,19456,19452,19548,19400,19564,19392,19452,19292,19520,19356,19520,19404,19512,19396,19468,19404,19588,19392,19588,19464,19464,19408,19528,19580,19544,19312,19552,19720,19620,19536,19684,19540,19564,19400,19320,19392,19448,19492,19520,19460,19452,19420,19316,19472,19560,19568,19512,19664,19348,19488,19388,19396,19272,19608,19488,19584,19460,19572,19412,19552,19504,19432,19364,19380,19396,19496,19356,19420,19368,19516,19344,22692,37892,20248,20216,20208,20172,20432,20332,20364,20136,20256,20284,20564,20336,36292,19508,19688,19360,19516,19560,19536,19500,19612,19640,19680,19540,19528,19512,19480,19456,19408,19320,19516,19380,19336,19452,19632,19560,19528,19520,19320,19288,19352,19392,19536,19508,19408,19428,19264,19776,19324,19500,19504,19436,19356,19460,19220,19476,19376,19496,19456,19536,19264,19540,19324,19452,19448,19520,19460,19584,19436,19544,19704,20696,19416,19496,19548,19784,19368,19520,19404,19536,21236,19544,19580,19620,19528,19608,19500,19528,19468,19500,19596,19516,19560,19332,19364,19496,19500,19548,19512,19344,19496,19564,19520,19268,19464,19432,19616,19404,19564,19352,19496,19468,19640,19624,19488,19404,19432,19532,19616,19424,19512,19408,19552,19256,19564,19476,19560,19404,19476,19472,19512,19384,19620,19504,19512,19620,19640,19520,19624,19676,19648,19280,19688,19656,19608,19592,19608,19528,19576,19388,19472,19584,19444,19648,19416,19420,19396,19436,19448,19568,19568,19504,19400,19516,19416,19532,19416,19504,19432,19592,19376,19852,19600,19576,19520,19532,19528,19448,19420,19452,19520,19660,19488,19476,19484,19488,19240,19452,19220,19580,19524,19492,19448,19580,19516,19556,19360,19660,19668,40556,20176,20276,20212,20292,19940,20260,20280,20340,27572,20432,20368,20240,20212,20300,20200,20272,20428,20208,20112,20044,20096,20304,20256,36164,19592,19336,19480,19352,19524,19472,19460,19352,19464,19216,19504,19504,19588,20736,19512,19524,19312,19352,19408,19384,19604,19440,19484,19444,19516,19216,19552,19312,19540,19524,19572,19468,19412,19440,19504,19376,19548,19508,19520,19468,19492,19268,19388,19276,19724,19628,19480,19488,19592,19572,19544,19444,19420,19376,19452,19612,19344,19364,19332,19400,19384,19524,19488,19444,19312,19540,19372,19392,19252,19488,19376,19548,19404,19496,19432,19616,19548,19608,19480,19448,19448,19352,19332,19524,19376,19376,19304,19488,19196,19396,19316,19532,19480,19460,19376,19444,19408,19524,19536,19548,19512,19452,19552,19544,19352,19548,36848,20208,20588,20372,20368,20400,20380,20324,20116,20252,20064,20296,20372,20144,35560,19440,19520,19456,19500,19416,19516,19340,19616,19516,19640,19472,19624,19416,19536,19328,19360,19364,19580,19328,19616,19456,19384,19368,19304,19268,19512,19432,19560,19560,19588,19444,19640,19424,19512,19460,19548,19376,19632,19528,19616,19512,19584,19532,19752,19504,19608,19408,19620,19360,19520,19568,40340,20456,20312,20324,20336,20144,20140,20280,20296,20328,20068,20144,20160,20136,36264,19608,19468,19420,19500,19472,19508,19444,19424,19512,19328,19540,19332,19456,19528,19544,19328,19532,19456,19572,19524,19456,19456,19612,19416,19540,19444,19600,19368,19524,19400,19592,19516,19488,19660,19508,19444,19492,19288,19488,19460,19472,19400],"result":{"estimate":19792.69698968049,"r_square":0.9994126472943377}},{"name":"add/set","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":150,"time":2093488817},"dataset":[{"x":1,"y":50932},{"x":2,"y":124812},{"x":3,"y":176312},{"x":4,"y":286644},{"x":5,"y":164240},{"x":6,"y":512016},{"x":7,"y":252924},{"x":8,"y":1044616},{"x":9,"y":276744},{"x":10,"y":314200},{"x":11,"y":350796},{"x":12,"y":3388716},{"x":13,"y":377004},{"x":14,"y":686940},{"x":15,"y":460664},{"x":16,"y":507724},{"x":17,"y":6691396},{"x":18,"y":564828},{"x":19,"y":2315660},{"x":20,"y":707892},{"x":21,"y":748336},{"x":22,"y":3616512},{"x":23,"y":748188},{"x":24,"y":10471888},{"x":25,"y":8455120},{"x":26,"y":762324},{"x":27,"y":789884},{"x":28,"y":1617184},{"x":29,"y":972768},{"x":30,"y":3068616},{"x":31,"y":992920},{"x":32,"y":2059188},{"x":33,"y":1161120},{"x":34,"y":30910912},{"x":35,"y":1032724},{"x":36,"y":1710712},{"x":37,"y":1159280},{"x":38,"y":1907016},{"x":39,"y":11454048},{"x":40,"y":1202500},{"x":41,"y":1992828},{"x":42,"y":1413468},{"x":43,"y":5251892},{"x":44,"y":2153668},{"x":45,"y":1499108},{"x":46,"y":19936264},{"x":47,"y":74724344},{"x":48,"y":1452968},{"x":49,"y":4505092},{"x":50,"y":2281060},{"x":51,"y":3244616},{"x":52,"y":1618964},{"x":53,"y":2678720},{"x":54,"y":3890448},{"x":55,"y":2538728},{"x":56,"y":2739484},{"x":57,"y":2142808},{"x":58,"y":6927356},{"x":59,"y":2764484},{"x":60,"y":7987132},{"x":61,"y":2992844},{"x":62,"y":14609524},{"x":63,"y":2911408},{"x":64,"y":6531340},{"x":65,"y":3002304},{"x":66,"y":5370192},{"x":67,"y":158824640},{"x":68,"y":3009996},{"x":69,"y":7816004},{"x":70,"y":2953436},{"x":71,"y":7450656},{"x":72,"y":3194200},{"x":73,"y":9026580},{"x":74,"y":3414376},{"x":75,"y":8111240},{"x":76,"y":3453152},{"x":77,"y":7928952},{"x":78,"y":3478480},{"x":79,"y":11196380},{"x":80,"y":13126648},{"x":81,"y":3751960},{"x":82,"y":13052900},{"x":83,"y":3837472},{"x":84,"y":5637840},{"x":85,"y":5698832},{"x":86,"y":3854884},{"x":87,"y":5873660},{"x":88,"y":6892048},{"x":89,"y":3920016},{"x":90,"y":6031084},{"x":91,"y":6866148},{"x":92,"y":3951100},{"x":93,"y":6027720},{"x":94,"y":7094704},{"x":95,"y":304015716},{"x":96,"y":4064700},{"x":97,"y":11328432},{"x":98,"y":11856076},{"x":99,"y":4151844},{"x":100,"y":10311484},{"x":101,"y":6068324},{"x":102,"y":7244292},{"x":103,"y":4125924},{"x":104,"y":7341544},{"x":105,"y":6498112},{"x":106,"y":7362556},{"x":107,"y":7475244},{"x":108,"y":4704724},{"x":109,"y":7457876},{"x":110,"y":6375096},{"x":111,"y":7304212},{"x":112,"y":7344144},{"x":113,"y":4396272},{"x":114,"y":7546680},{"x":115,"y":7696044},{"x":116,"y":6930128},{"x":117,"y":6080440},{"x":118,"y":7317900},{"x":119,"y":5869980},{"x":120,"y":9118648},{"x":121,"y":19837916},{"x":122,"y":13793552},{"x":123,"y":11223860},{"x":124,"y":5903436},{"x":125,"y":11006920},{"x":126,"y":11017124},{"x":127,"y":11316332},{"x":128,"y":11278040},{"x":129,"y":17580632},{"x":130,"y":26557768},{"x":131,"y":11658172},{"x":132,"y":12434304},{"x":133,"y":11933832},{"x":134,"y":538952220},{"x":135,"y":15055264},{"x":136,"y":11010672},{"x":137,"y":11325556},{"x":138,"y":11400688},{"x":139,"y":11404868},{"x":140,"y":11423048},{"x":141,"y":11632992},{"x":142,"y":11534304},{"x":143,"y":11538552},{"x":144,"y":12501148},{"x":145,"y":11548764},{"x":146,"y":11179388},{"x":147,"y":11436360},{"x":148,"y":11748528},{"x":149,"y":11939172},{"x":150,"y":17253132}],"kde":[38672,32880,33076,63124,34568,52664,34640,38972,37712,36440,35524,49728,33104,34660,48856,32276,31708,32184,32344,32924,32400,32128,32476,32044,31848,32012,32112,32744,31852,32920,32892,33660,32984,32880,32716,33400,32308,32340,31876,31848,31912,32464,32504,32428,32636,32096,32524,32624,33272,32268,32280,32308,32340,32016,33660,49912,33828,33748,33104,33792,33816,33160,33724,33392,48828,31836,971820,35940,33296,39776,32624,32424,32912,32864,32096,31744,33416,32628,32196,32028,32388,31996,32296,32784,32204,33116,32456,32032,31920,32684,33820,67508,36984,33132,33320,36644,33716,33400,34164,32884,48348,32084,32100,31680,32412,31940,32032,32212,32144,32024,31836,32688,33620,32780,32440,31880,31840,32320,31804,31720,32012,31860,32052,32632,31636,31820,31780,33296,31552,31800,32380,32072,32564,32068,5688488,49376,33584,33460,33268,33504,32532,33596,32520,32576,31960,32688,31752,31996,32688,32176,32176,32436,32884,32568,32304,32232,32320,33440,32456,32468,43320,52852,33716,33172,34104,32684,33720,33176,33632,33744,48928,32452,32552,32264,32340,31908,32464,31936,31972,32124,32248,33112,32092,33536,32184,32552,34004,32788,32564,32336,32296,32476,32036,32608,32168,31912,32688,32680,31612,32848,31352,32360,33816,962840,34288,33388,32628,33160,32420,33496,33872,33552,32076,32232,32156,32320,32664,32652,32492,32604,31836,32592,32272,32552,31964,32840,32612,31936,33016,31944,31868,32976,32244,32780,33308,49544,34428,33192,35192,37996,33456,33580,33476,33204,49880,31964,32232,33300,32456,32640,32192,60828,34232,34684,33068,33320,32676,33108,33736,33548,48644,32124,32332,31436,32372,32400,32316,31960,32504,32444,32084,7605520,58096,35188,34908,35028,33800,32424,33516,33172,32728,32328,32156,32188,32328,33040,31804,32332,32564,32736,31996,32184,31956,32608,32568,33104,32372,33020,32528,32596,32308,32460,33716,32996,32244,31992,32492,31712,32024,31796,32608,32572,33044,33168,32348,32188,33784,33460,34780,34748,32228,31960,32144,31916,33004,31928,32044,32048,32144,32224,31860,32776,32308,32728,32396,32200,32084,32240,33008,961680,34884,34084,32060,32608,32196,32208,32756,33996,32428,32588,33584,31796,32460,32076,31772,61588,34288,33780,33692,33776,33400,33136,33444,34324,49904,32800,32272,32120,32372,32428,32024,32436,33244,32836,32532,32492,33340,32056,32200,32272,31864,32272,32860,32588,32424,32272,31920,32604,32760,32080,31880,31720,32652,32060,32448,32016,31796,31756,31924,31468,32620,32240,32332,31772,32364,32136,32188,7557540,57472,36064,41396,34044,33456,33504,33316,32860,31988,32744,32044,31624,32276,32596,32484,32380,33044,33184,32688,32384,32620,32940,34376,32800,33428,33160,32144,32856,32868,32112,32364,32736,33176,33104,32244,32688,32704,32196,31828,32604,32564,32268,31740,31664,33720,32944,32612,31680,32620,32816,32136,32760,32064,32964,32260,32916,32228,31792,32024,31916,31912,32132,32268,32444,32292,32376,33456,32436,1035004,36280,32520,32188,32152,32288,32320,31768,33112,31612,33432,31904,32264,32172,33576,32188,32020,31724,32308,32112,34016,31572,31504,40532,33328,32160,33352,32464,32380,39584,32892,31412,61244,33896,33112,32960,33220,33424,32988,33560,33524,34276,33952,33516,33904,65956,33292,32748,33136,33096,33756,33268,32612,32832,32496,33320,32848,50688,33600,31576,31464,32120,31836,32000,32344,32504,31944,31796,8271376,42164,35552,35200,34312,34736,33756,33388,32876,33888,34140,33136,33252,33128,32396,32560,32408,32312,33720,33292,33092,32652,33200,32712,192732,38164,34656,35044,34748,34352,34384,50828,49540,31868,32280,32164,33020,38784,33484,32236,31712,32556,31928,32240,32284,32428,31976,32056,32124,31640,32228,32144,31964,32204,32128,32112,32084,32832,32808,31988,32540,31988,31976,32764,32204,34064,34948,34244,960856,36996,32268,32124,32652,32348,32296,32280,32900,37120,37168,32288,32048,32112,32300,32176,31704,34780,32200,32400,32044,33196,33152,31824,32388,32204,31664,32212,32284,31792,31968,32240,31992,31612,32456,32004,31752,32520,31644,32724,33076,31572,32160,60032,33092,32776,33048,33280,32908,33084,33268,33052,48064,32516,32192,31688,32500,32148,32156,32152,31656,32332,33368,32060,31776,32564,31932,32720,32468,7265452,39404,35424,34124,33624,33816,48980,31868,32424,31360,31436,30984,30792,32728,31184,32388,31224,30648,30792,31032,31660,30996,31324,31560,31528,31652,31572,32324,30816,31188,32144,31732,31436,31416,31068,31120,30968,31104,31564,31480,31780,30928,31228,31640,48932,32972,32700,32796,32688,33012,32108,32188,32032,32372,47668,31544,30796,32376,31144,31844,31692,31196,31080,30876,31780,30952,31140,31232,967164,36260,39112,31556,31256,33012,31136,31032,31592,31112,31140,31468,32572,31740,31320,31276,32836,31156,49404,32564,32264,63932,33244,33312,33604,34060,52908,72928,55152,32040,31936,32504,33332,32308,32600,33648,31848,31912,32096,47692,30804,31056,31684,31248,31056,31584,32564,31416,31736,31752,31892,31144,31020,31120,30980,30796,31232,32696,31000,32348,30652,30940,30700,31172,30788,30456,31648,30692,5773052,38712,33564,32080,31960,32180,31236,32448,31236,31200,30868,30804,32948,30900,32612,31272,31344,31528,31436,82000,32696,31908,31912,31720,32940,32168,32488,32348,47864,30480,31636,31252,31100,30604,32460,30796,31080,30900,31132,31580,31032,30956,31408,31204,31280,30416,30912,30952,30864,30524,30468,30780,32108,30844,31240,30552,32184,30840,30560,30144,30504,30640,30916,30548,30580,31160,31584,30952,961780,36584,31156,31220,31120,31004,30664,30968,30732,30500,32060,30924,30948,30832,31408,30672,30804,30732,30912,31224,31024,30932,30832,31140,30516,30288,30436,31108,30756,30580,30740,30760,32104,30680,30584,31272,31060,30764,31028,31316,31288,30680,31264,30860,31044,31352,30728,60896,32720,32336,31508,31976,31832,32316,33456,48360,30832,31088,31148,30528,30684,30856,30756,31312,30352,30608,30300,30284,30944,5136284,34880,31896,31252,32416,31632,31256,32236,31612,31308,67016,73884,38560,31268,30840,31284,31508,32056,31624,31528,31332,31248,32168,31724,30976,31724,31628,31428,30732,31540,31408,30928,31512,30884,30672,31812,31044,30952,31152,31256,31084,30908,48764,32476,32212,31988],"result":{"estimate":182014.157076412,"r_square":0.02731117213177947}}]}


if (contents == null)
    d3.json("outputs.json", render);
else
    render(contents);
}

  </script>

</body>
</html>
